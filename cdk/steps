https://cdkworkshop.com/20-typescript/20-create-project/500-deploy.html


To initialize
cdk init sample-app --language typescript

To compile the code

cd <directory>
npm run watch

//generate a CloudFormation template in YAML format
cdk synth -y > test.yaml

cdk bootstrap

cdk deploy


Let's write some code

Remove the topics and subscriptions

Add Lambda module

npm install @aws-cdk/aws-lambda

Add API Gateway module
npm install @aws-cdk/aws-apigateway

ecs-cli configure profile --profile-name default_ecs --access-key AKIAWPBDIZTMQXU577XY --secret-key S9woGvUtmQBukgTG7m/yDEo8TJ2tQybHrMR+fJkU


Steps for Container Deployment

docker build -t nginx_sample .

aws ecr create-repository --repository-name nginx

aws ecr get-login

docker login -u AWS -p eyJwYXlsb2FkIjoiNVVyUU1lY25vUzlQVEd5YzVrV3hpZk9BVE4yMDl5MlViWENmMTJkVjlBajRzNS9RSS8rUVZBd3lwUWtsdFJIeitpMjFnNmVuZEFSdWJ6M1BVV0JpcWN5di84akVFWHBBTE9hRVAyYWNPR0xlcWpnRWw5RXVzaTdtbi9tNUo3QzFwM2Rxc3oyWkJzRHViK3htaHI5cWZtUlBCQnROeXJWczBIMmlKRnJ4N2tPVEgyL2dGQVE2eEJTRDBKWFVNSnhzZjhtU0hJQWNrQzFEc1VTMTBHVWFSYmlrOHBvS0U2NzYyS0wzN2N2MjZTSTMzb3NlejhaR3FRSTA4aEs4MWZDa1c0RmxUYlVxUjZ1S1ZzSW4wUmQrSVdRMGM4ZzlrS3Ayd3lPb0tXS1QvNXZqNmtsSklCL3JVUjJ4MFZhd2FRL1VHamlrQXlubmZreHlwUHZtLzlSNlp0Qk12ZVdsKy9xQlVLdDludVRpSWZGNElqVWpVWGdGTUEvQXJyZXNUaXZYTmU4bzhTUG5XOVdwakJ4ZWxCNFloSjg4d1VMZnBJWlZsdXhYb0xzSy9oRGZNTHpwaC9WYjNUMWFDZGNYMkNjOUNxc3lIZkpCNitsRzRCdURPdXJKSHZVdmdzZFFmVTQ2NW8wdGo0YmY4VGpYclhsTnhTNDZpMHF5KzNaVjVwZU1RVk1qZThhWGVBVVA5R1NxQVhvWVhEV2lJWCtyY3NGaFU2MmtjYlZsOUVxYytDNWsxbENOc3NvclpWcG1DNjZFS0hrd3R3VDF2ZFl5elJTTUluVktvem16cnBZT2xGTWdvNEFDM1d4Mk44blowL1ZPdHNnbWlnR1NLNW83Skk5Yjh4aFpHUkgrZVRmY2FLUkhJaU1ONWZiNENxSi9oZytUSCt3R2hOeHBPeHRObTkvak50NHNVazVrV1d1N2o1UUd2V2JPdFNTbktaRnpWQVY1OXlLYWNremR2MzE4OEUzeXc5MTdkQk55bWdrVml3eDZzNG1yN1l4ZWRzZWx0WkVpVmZIUzdXWDlBajZoQXA3TDN0cXN3UCtkOTduOVhOZnJ0Y2FIZXBnNHkwd3dPbmh4RDMySXlPUDVYY1VVemhrSkQzaVovWjBXRFN1MUg1Sy8weTAyMnFjdTZlM3FmTUtBK1BRVXU5YmRYUHpTNXpaY2JOcjRGbU52SVN0YzQ2SDN3cXBKbVBYa1ZZVnVFRnAxY1Jyd0EyeFRRd3NsN214ZThUR21SODlkL1B4Y2lDMytJSUt5dUZ5S0JUT2pkOXF6KzRvLzU3NjNNQ1N1b1AwSm0xcWdQTVVGamIyS0dENmZ6anB1NENlK1paV3BwV2ljajZieG8xMjBURXFzUHlLdDdtanA2c1djb3JNZFV1SlZKNEdJTmpIemtqOUd6R2ZIWWp6YTdmZDErMGI5c1pvSVRZTW1ibVBZUkZoR29HeVhNNHJFRXl6dWwzN0NMYUgxR0hjbUFJbE5kaEZsQXc9PSIsImRhdGFrZXkiOiJBUUVCQUhod20wWWFJU0plUnRKbTVuMUc2dXFlZWtYdW9YWFBlNVVGY2U5UnE4LzE0d0FBQUg0d2ZBWUpLb1pJaHZjTkFRY0dvRzh3YlFJQkFEQm9CZ2txaGtpRzl3MEJCd0V3SGdZSllJWklBV1VEQkFFdU1CRUVESWFiQTRKdlhpVEloUStPSndJQkVJQTdVN1NOSnNVUWhFaG9vUUl4TWNQWWppYW1JbU9iSDBqNDZVR3VyUEc3bXVXNVU4aHh6UXV1UEZySmxnN2llOEg1cG5vY2JLU3NSbUZ2NzZNPSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTU2NjI3ODkyOH0= -e none https://444603092185.dkr.ecr.us-east-1.amazonaws.com

docker tag nginx_sample 444603092185.dkr.ecr.us-east-1.amazonaws.com/nginx:rev1

docker push 444603092185.dkr.ecr.us-east-1.amazonaws.com/nginx:rev1
